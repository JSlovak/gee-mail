<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>

    window.onload = function (){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browse

// "5. You must show an inbox count somewhere on the page to show the current number of messages in your inbox."        

        console.log (window.geemails);

        var startCount = window.geemails.length;
        var emailCount = document.createElement("div");
        emailCount.id = "count";
        emailCount.innerHTML = "Inbox: " + startCount;
        header.appendChild(emailCount);

// "6. Set a recurring function to via the JavaScript `setInterval` function that will call our existing `getNewMessage` function that we have created for you that will return a newly created message with the same properties as your previous messages."

	setInterval(function()) {

		//create a var with DOM to pull random from the arrays
		var emailBox = document.createElement("div");
      	emailBox.className = "emailDisplay";
      	content.appendChild(emailBox);
      	emailBox.addEventListener("click",readMessage);

      	newDate.innerHTML = getRandomDate;
		var newDate = document.createElement("div");
		newDate.className = "emailDate";
		emailBox.appendChild(newDate);

		var genSub = [Math.floor(Math.random ()*10)].date
		var newSub = document.createElement("div");
		newSub.className = "subjectMessage";
		emailBox.appendChild(newSub);

		var genSend = [Math.floor(Math.random ()*10)].date
		var newSend = document.createElement("div");
		newSend.className = "senderName";
		emailBox.appendChild(newSend);

		var genMsg = [Math.floor(Math.random ()*10)].date
		var newMessage = document.createElement("div");
		newMessage.className = "messageBody";
		emailBox.appendChild(newMessage);

		var newCount = (window.geemails.legnth)++;
		emailCount.innerHTML = "Inbox: " + newCount;
		header.appendChild(emailCount);
		

	},5000);

/* 3. When your page loads, via JavaScript access our prepopulated data stored in the `window.geemails` variable. Each object in the array has the following properties:
	* date - The date message was sent
	* subject - The subject of the message
	* sender - The sender of the message
	* body - The GeeMail message content

4. With this data you must make a visual list of mail messages on the page with the following minimum requirements.

	* Each message should have it's own row showing:
		* Date
		* Sender
		* Subject
	  */


  
      for (var i = 0; i < geemails.length; i++) {
      	//console.log(geemails[i]);
      	//console.log(geemails[i].date);
      	//console.log(geemails[i].sender);
      	//console.log(geemails[i].subject);
      	//console.log(geemails[i].body);
      	var emailBox = document.createElement("div");
      	emailBox.className = "emailDisplay";
      	content.appendChild(emailBox);
      	emailBox.addEventListener("click",readMessage);

      	var pubDate = geemails[i].date;
      	var eDate = document.createElement("div");
      	eDate.className = "emailDate";
      	eDate.innerHTML = "Date: " + pubDate;
      	emailBox.appendChild(eDate);

      	var pubSubject = geemails[i].subject;
      	var eSubject = document.createElement("div");
      	eSubject.className = "subjectMessage";
      	eSubject.innerHTML = pubSubject;
      	emailBox.appendChild(eSubject);

      	var pubSender = geemails[i].sender;
      	var eSender = document.createElement("div");
      	eSender.className = "senderName";
      	eSender.innerHTML = "From: " + pubSender;
      	emailBox.appendChild(eSender);

      	var pubBody = geemails[i].body;
      	var eBody = document.createElement("div");
      	eBody.className = "messageBody";
      	eBody.innerHTML = pubBody;
      	emailBox.appendChild(eBody);
					
		}

// * When clicking on a message you must provide some method of showing the message for that row.		

		function readMessage (){

			var getMessage = this.querySelectorAll(".messageBody")[0];

			if ( getMessage.style.display === "none" ){ 
				 getMessage.style.display = "block";

			}else {
				getMessage.style.display = "none";
		}
    
     }



	};	

	</script>

	</head>

	<body>
		<header id = "header" >
			<img id= "logo" src="http://images.parenting.mdpcdn.com/sites/parenting.com/files/styles/slide/public/gee-mail-funny-app.jpg?itok=DvqbRAs-" alt="Gee Mail Logo">
			<div id= "search bar" ></div>
		</header>
		<div id = "content" ></div>
			
	</div>
	

	</body>
</html>